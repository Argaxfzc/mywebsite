<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kitaselamanya — Dedikasi untuk Trisna Arsya</title>

<!-- Tailwind + GSAP -->
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/gsap@3.12.2/dist/gsap.min.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --pink:#ec4899; --purple:#a855f7; --glass: rgba(255,255,255,0.04);
  }
  html,body{height:100%;margin:0;font-family:"Poppins",system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#050614,#150923);color:#fff;overflow:hidden}
  /* canvas background */
  canvas#starfield{position:fixed;inset:0;z-index:0;display:block}

  /* strawberries layer */
  #strawberries{position:fixed;inset:0;pointer-events:none;z-index:5}

  /* blackhole overlay */
  #blackhole-overlay{position:fixed;inset:0;z-index:140;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .28s}
  #blackhole-vortex{width:46vmax;height:46vmax;border-radius:50%;filter:blur(28px) saturate(1.05);transform:scale(.6);background:radial-gradient(circle at 35% 35%, rgba(236,72,153,0.45), rgba(168,85,247,0.35) 25%, rgba(58,24,117,0.25) 45%, rgba(0,0,0,0.95) 70%);will-change:transform,opacity,rotate}

  /* app wrapper */
  #app{position:relative;z-index:10;height:100vh;display:flex;flex-direction:column}

  /* navbar fixed */
  #navbar{position:fixed;left:50%;transform:translateX(-50%);top:18px;z-index:160;display:flex;gap:8px;background:rgba(255,255,255,0.03);backdrop-filter:blur(8px);padding:6px;border-radius:999px;box-shadow:0 8px 30px rgba(168,85,247,0.06)}
  #navbar button{background:transparent;border:0;color:rgba(255,255,255,0.9);padding:8px 14px;border-radius:999px;cursor:pointer;font-weight:600; font-size:14px}
  #navbar button:hover{background:linear-gradient(90deg,var(--pink),var(--purple));color:white;transform:translateY(-2px)}

  /* page = full viewport, scroll inside each page */
  .page{position:absolute;inset:0;height:100vh;width:100%;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:none;opacity:0;transition:opacity .45s ease,transform .45s ease;transform-origin:center;transform:scale(.998)}
  .page.active{pointer-events:auto;opacity:1;transform:scale(1)}
  .page-inner{min-height:100vh;padding:96px 28px 64px;box-sizing:border-box;display:flex;justify-content:center}

  /* cards */
  .card{background:rgba(0,0,0,0.45);backdrop-filter:blur(8px);border-radius:14px;padding:20px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 12px 40px rgba(168,85,247,0.06)}

  /* login */
  .login-wrap{display:flex;gap:28px;align-items:center;justify-content:center;flex-wrap:wrap;max-width:1200px;width:100%}
  .login-photo{width:420px;height:520px;border-radius:14px;object-fit:cover;border:3px solid rgba(236,72,153,0.08);box-shadow:0 20px 60px rgba(168,85,247,0.12)}

  /* buttons (pill, futuristic) */
  .btn-pill{
    position:relative;
    display:inline-flex;align-items:center;justify-content:center;gap:10px;
    padding:10px 20px;border-radius:999px;border:0;font-weight:600;cursor:pointer;
    color:#fff;background:linear-gradient(90deg,var(--pink),var(--purple));
    box-shadow:0 10px 30px rgba(168,85,247,0.18), inset 0 -2px 12px rgba(0,0,0,0.12);
    transition:transform .22s ease,box-shadow .22s ease;
    overflow:hidden;
  }
  .btn-pill:hover{transform:translateY(-4px) scale(1.02);box-shadow:0 18px 50px rgba(168,85,247,0.24)}
  .btn-shine{position:absolute;inset:0;pointer-events:none;background:linear-gradient(90deg,rgba(255,255,255,0.06),rgba(255,255,255,0.0));opacity:0;transition:opacity .22s;mix-blend-mode:overlay}
  .btn-pill:hover .btn-shine{opacity:1}

  /* photo grid auto-fit; frames auto-size to image */
  .gallery{
    width:100%;max-width:1200px;display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;
    align-items:start;
  }
  .frame{
    background:linear-gradient(180deg,rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px;padding:12px;display:flex;flex-direction:column;align-items:center;gap:12px;border:1px solid rgba(255,255,255,0.03);
  }
  .frame img{width:100%;height:auto;object-fit:contain;border-radius:12px;max-height:70vh;display:block}

  /* love overlay */
  .love-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;font-family:'Playfair Display';font-size:3.2rem;text-shadow:0 0 20px rgba(236,72,153,.95);color:#fff;opacity:0;transition:opacity .35s}

  /* cursor visuals */
  .cursor-dot,.cursor-ring{position:fixed;left:0;top:0;pointer-events:none;z-index:170;mix-blend-mode:screen}
  .cursor-dot{width:8px;height:8px;border-radius:999px;background:#fff;transform:translate(-50%,-50%);transition:transform .03s linear}
  .cursor-ring{width:56px;height:56px;border-radius:999px;border:2px solid rgba(236,72,153,.45);transform:translate(-50%,-50%);transition:transform .12s ease,opacity .12s ease;background:radial-gradient(circle, rgba(236,72,153,0.06), transparent 40%);opacity:.95}

  /* trail */
  .trail{position:fixed;width:8px;height:8px;border-radius:999px;background:rgba(236,72,153,0.95);pointer-events:none;z-index:165;mix-blend-mode:screen;filter:blur(.6px)}

  /* music toggle */
  #music-toggle{position:fixed;right:18px;bottom:18px;z-index:170;background:rgba(0,0,0,0.45);padding:8px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);backdrop-filter:blur(6px);display:flex;gap:8px;align-items:center;cursor:pointer}

  @media (max-width:900px){
    .login-photo{width:320px;height:420px}
    #navbar{left:12px;transform:none;top:12px}
    .gallery{gap:12px}
  }
  @media (prefers-reduced-motion: reduce){*{transition:none!important;animation:none!important}}
</style>
</head>
<body>

  <!-- canvas starfield -->
  <canvas id="starfield"></canvas>

  <!-- strawberry DOM layer -->
  <div id="strawberries" aria-hidden="true"></div>

  <!-- blackhole overlay -->
  <div id="blackhole-overlay" aria-hidden="true"><div id="blackhole-vortex"></div></div>

  <!-- custom cursor -->
  <div class="cursor-dot" id="cursor-dot"></div>
  <div class="cursor-ring" id="cursor-ring"></div>

  <!-- music toggle -->
  <div id="music-toggle" title="Play / Pause music" role="button" aria-pressed="false">
    <svg id="play-icon" width="18" height="18" viewBox="0 0 24 24" fill="#ffb6d9"><path d="M7 6v12l10-6z"/></svg>
    <svg id="pause-icon" width="18" height="18" viewBox="0 0 24 24" fill="#ffb6d9" style="display:none"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
    <div id="eq" style="display:flex;gap:3px;align-items:flex-end">
      <div style="width:3px;height:6px;background:#ff7ab9;border-radius:2px;transition:height .12s"></div>
      <div style="width:3px;height:10px;background:#ff7ab9;border-radius:2px;transition:height .12s"></div>
      <div style="width:3px;height:7px;background:#ff7ab9;border-radius:2px;transition:height .12s"></div>
    </div>
  </div>
  <audio id="bg-music" loop preload="auto"><source src="music/lagu1.mp3" type="audio/mpeg"></audio>

  <!-- NAVBAR -->
  <div id="navbar" role="navigation" aria-label="Main nav" style="display:none">
    <button data-target="tentang-page">Tentang</button>
    <button data-target="penjelasan-page">Our Story</button>
    <button data-target="foto-page-1">Foto</button>
    <button data-target="video-page">Video</button>
  </div>

  <!-- APP -->
  <div id="app">
    <!-- LOGIN PAGE -->
    <main id="login-page" class="page active" aria-labelledby="loginTitle">
      <div class="page-inner">
        <div class="login-wrap">
          <div class="login-card card login-card" style="min-width:320px">
            <h1 id="loginTitle" class="text-3xl glow mb-2">My Eternal Love</h1>
            <p class="text-pink-200 mb-4">For Trisna Arsya</p>

            <form id="login-form" class="space-y-4" onsubmit="return false;">
              <div>
                <label class="text-sm text-pink-200 block mb-1">Username</label>
                <input id="username" class="w-full p-3 rounded bg-black/30 border border-pink-600/20 text-white" placeholder="Enter your name" />
              </div>
              <div>
                <label class="text-sm text-pink-200 block mb-1">Password</label>
                <input id="password" type="password" class="w-full p-3 rounded bg-black/30 border border-pink-600/20 text-white" placeholder="Enter special date" />
              </div>
              <div class="flex gap-3 items-center">
                <button id="submit-login" class="btn-pill">
                  <span>Enter Our World</span>
                  <span class="btn-shine"></span>
                </button>
                <button id="autofill" class="px-3 py-2 rounded-full border border-white/10 text-pink-200">Autofill</button>
              </div>
              <p class="text-sm text-pink-200 mt-3">Hint — Username: <b>Kitaselamanya</b> | Password: <b>11september2025</b></p>
            </form>
          </div>

          <div>
            <img src="images/foto6.jpg" alt="Foto berdua" class="login-photo" loading="lazy">
          </div>
        </div>
      </div>
    </main>

    <!-- TENTANG PAGE -->
    <section id="tentang-page" class="page" aria-labelledby="tentangTitle">
      <div class="page-inner">
        <div class="card" style="max-width:920px">
          <h1 id="tentangTitle" class="text-4xl glow mb-4">Tentang Trisna Arsya</h1>
          <div style="color:#ffdbe7;line-height:1.8">
            <p>Awalnya semua terasa biasa saja, hanya sekadar pertemuan di Indovoice Roblox. Kita ngobrol, bercanda, bahkan kadang saling ganggu sambil main bareng. Tapi tanpa sadar, dari setiap kata yang terucap dan setiap tawa yang dibagikan, ada sesuatu yang tumbuh pelan-pelan. Rasa nyaman itu datang begitu saja, sederhana tapi dalam.</p>
            <p>Sampai akhirnya, aku sadar kalau ada yang berbeda. Bukan lagi sekadar teman ngobrol di game, tapi seseorang yang bisa bikin aku betah berlama-lama, yang bikin aku tersenyum bahkan setelah offline. Dari situ, aku dan Trisna Arsya berani melangkah lebih jauh: saling jujur tentang perasaan dan akhirnya resmi pacaran.</p>
            <p>Cerita kita mungkin nggak dimulai dengan cara yang biasa, tapi justru itulah yang bikin spesial. Dari sebuah ruang virtual, kita menemukan koneksi nyata yang hangat. Sekarang, setiap hari terasa lebih indah karena aku tahu ada dia yang selalu hadir, entah dalam candaan kecil atau perhatian manis yang bikin hati tenang.</p>
            <p>Kisah ini baru dimulai, tapi aku yakin bersama Trisna Arsya, perjalanan ini akan penuh warna, tawa, dan kenangan indah yang terus kita ukir bareng. 💕</p>
          </div>

          <div class="mt-6 flex gap-3">
            <button class="btn-pill" data-target="penjelasan-page">Our Story → <span class="btn-shine"></span></button>
            <button class="btn-pill" data-target="foto-page-1" style="background:linear-gradient(90deg,#fff1, #fff0); color:#ffd6ea; box-shadow: inset 0 -6px 18px rgba(0,0,0,0.25)">See Photos</button>
          </div>
        </div>
      </div>
    </section>

    <!-- PENJELASAN PAGE -->
    <section id="penjelasan-page" class="page" aria-labelledby="ourTitle">
      <div class="page-inner">
        <div class="card" style="max-width:920px">
          <h2 id="ourTitle" class="text-3xl glow mb-4">Our Eternal Bond</h2>
          <p style="color:#ffdbe7;line-height:1.8">
            Everything started so simply—just two people meeting by chance in Indovoice Roblox.
            At first, it was just games, laughter, and casual chats. But little by little, something deeper grew.
            What once felt ordinary began to feel like home.
            <br><br>
            We discovered comfort in each other’s presence, joy in the smallest conversations, and a connection that made time feel lighter.
            From friendship came honesty, and from honesty bloomed love.
            <br><br>
            Now, this is no longer just a story of a game—it’s our story. A story of two hearts, bound not by distance or place, but by the simple magic of finding each other. 💕
          </p>

          <div class="mt-6">
            <button class="btn-pill" data-target="foto-page-1">See Memories → <span class="btn-shine"></span></button>
          </div>
        </div>
      </div>
    </section>

    <!-- GALLERY (auto grid) PHOTO PAGES 1..5 -->
    <section id="foto-page-1" class="page" aria-labelledby="foto1Title">
      <div class="page-inner">
        <div class="photo-viewport">
          <div style="width:100%;display:flex;flex-direction:column;align-items:center;gap:18px;">
            <div style="position:relative;width:100%;display:flex;justify-content:center;">
              <img id="img-1" class="photo-img" src="images/foto1.jpg" alt="Foto 1" loading="lazy" />
              <div id="love-1" class="love-overlay">I LOVE U</div>
            </div>

            <div class="photo-desc card">
              <h3 id="foto1Title" class="text-2xl mb-3 glow">Foto 1</h3>
              <p>Bathed in the warmth of golden sunlight, she sits by the window, her smile brighter than the morning sky outside. There’s something enchanting in the way she looks at the world—so effortlessly soft, yet powerful enough to melt every wall. And then, with a playful wink, she turns an ordinary moment into a story of magic, as if love itself had chosen her eyes as its home.</p>
            </div>

            <div style="display:flex;gap:10px;">
              <button class="btn-pill" data-target="foto-page-2">Next →</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="foto-page-2" class="page" aria-labelledby="foto2Title">
      <div class="page-inner">
        <div class="photo-viewport">
          <div style="width:100%;display:flex;flex-direction:column;align-items:center;gap:18px;">
            <div style="position:relative;width:100%;display:flex;justify-content:center;">
              <img id="img-2" class="photo-img" src="images/foto2.jpg" alt="Foto 2" loading="lazy" />
              <div id="love-2" class="love-overlay">I LOVE U</div>
            </div>

            <div class="photo-desc card">
              <h3 id="foto2Title" class="text-2xl mb-3 glow">Foto 2</h3>
              <p>She rests her hand gently on her cheek, as if holding the weight of a thousand unspoken dreams. The light falls tenderly across her skin, revealing the kind of beauty that doesn’t shout but whispers. In her eyes, there’s an entire universe—calm oceans, midnight skies, and the gentle promise of forever. Even in stillness, she speaks in the language of love, the kind only hearts can understand.</p>
            </div>

            <div style="display:flex;gap:10px;">
              <button class="btn-pill" data-target="foto-page-1">← Previous</button>
              <button class="btn-pill" data-target="foto-page-3">Next →</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="foto-page-3" class="page" aria-labelledby="foto3Title">
      <div class="page-inner">
        <div class="photo-viewport">
          <div style="width:100%;display:flex;flex-direction:column;align-items:center;gap:18px;">
            <div style="position:relative;width:100%;display:flex;justify-content:center;">
              <img id="img-3" class="photo-img" src="images/foto3.jpg" alt="Foto 3" loading="lazy" />
              <div id="love-3" class="love-overlay">I LOVE U</div>
            </div>

            <div class="photo-desc card">
              <h3 id="foto3Title" class="text-2xl mb-3 glow">Foto 3</h3>
              <p>Amid shelves filled with colors, plush toys, and tiny fragments of childhood joy, she stands with elegance that outshines it all. A simple mirror captures her presence, yet the reflection feels infinite—like catching a glimpse of eternity in something fleeting. The world around her may be filled with countless stories, but in that moment, she became the most beautiful chapter.</p>
            </div>

            <div style="display:flex;gap:10px;">
              <button class="btn-pill" data-target="foto-page-2">← Previous</button>
              <button class="btn-pill" data-target="foto-page-4">Next →</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="foto-page-4" class="page" aria-labelledby="foto4Title">
      <div class="page-inner">
        <div class="photo-viewport">
          <div style="width:100%;display:flex;flex-direction:column;align-items:center;gap:18px;">
            <div style="position:relative;width:100%;display:flex;justify-content:center;">
              <img id="img-4" class="photo-img" src="images/foto4.jpg" alt="Foto 4" loading="lazy" />
              <div id="love-4" class="love-overlay">I LOVE U</div>
            </div>

            <div class="photo-desc card">
              <h3 id="foto4Title" class="text-2xl mb-3 glow">Foto 4</h3>
              <p>She walks as though the world itself was painted to match her steps, every detail around her glowing a little brighter in her presence. The ornate walls, the lights, the art—all seem to bow gently, for they know they are not the masterpiece here. She is. With grace in her stance and a smile that holds both strength and softness, she turns an ordinary corridor into a gallery of love, and anyone who sees her becomes a believer.</p>
            </div>

            <div style="display:flex;gap:10px;">
              <button class="btn-pill" data-target="foto-page-3">← Previous</button>
              <button class="btn-pill" data-target="foto-page-5">Next →</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="foto-page-5" class="page" aria-labelledby="foto5Title">
      <div class="page-inner">
        <div class="photo-viewport">
          <div style="width:100%;display:flex;flex-direction:column;align-items:center;gap:18px;">
            <div style="position:relative;width:100%;display:flex;justify-content:center;">
              <img id="img-5" class="photo-img" src="images/foto5.jpg" alt="Foto 5" loading="lazy" />
              <div id="love-5" class="love-overlay">I LOVE U</div>
            </div>

            <div class="photo-desc card">
              <h3 id="foto5Title" class="text-2xl mb-3 glow">Foto 5</h3>
              <p>Selamanya bersama, tak tergantikan.</p>
            </div>

            <div style="display:flex;gap:10px;">
              <button class="btn-pill" data-target="foto-page-4">← Previous</button>
              <button class="btn-pill" data-target="video-page">Our Story →</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- VIDEO PAGE -->
    <section id="video-page" class="page" aria-labelledby="videoTitle">
      <div class="page-inner">
        <div class="card" style="max-width:920px">
          <h2 id="videoTitle" class="text-3xl glow mb-4">Forever with you, Trisna Arsya</h2>
          <video controls class="w-full rounded-md" style="max-height:60vh"><source src="vidio/vid1.mp4" type="video/mp4">Your browser does not support the video tag.</video>
          <div class="mt-6">
            <button class="btn-pill" data-target="login-page">Start Again ♥</button>
          </div>
        </div>
      </div>
    </section>

  </div>

<script>
/* ---------------------------
   Utility & preloads
   --------------------------- */
const pages = Array.from(document.querySelectorAll('.page'));
const navbar = document.getElementById('navbar');
const navButtons = Array.from(document.querySelectorAll('#navbar button'));
const musicToggle = document.getElementById('music-toggle');
const bgMusic = document.getElementById('bg-music');
const playIcon = document.getElementById('play-icon');
const pauseIcon = document.getElementById('pause-icon');
const eqBars = Array.from(document.querySelectorAll('#eq div'));

/* Preload common assets (best-effort) */
const assets = [
  'images/foto1.jpg','images/foto2.jpg','images/foto3.jpg','images/foto4.jpg','images/foto5.jpg','images/foto6.jpg',
  'music/lagu1.mp3','vidio/vid1.mp4'
];
let loaded=0;
function assetLoaded(){ loaded++; }
assets.forEach(p=>{
  if(p.match(/\.(jpg|png|webp)$/i)){ const i=new Image(); i.src=p; i.onload=assetLoaded; i.onerror=assetLoaded; }
  else { fetch(p, {method:'HEAD'}).then(()=>assetLoaded()).catch(()=>assetLoaded()); }
});
setTimeout(()=> { if(!window.__uiDone) initUI(); }, 2000);

/* ---------------------------
   Initialize UI
   --------------------------- */
function initUI(){
  window.__uiDone = true;
  // initial page
  pages.forEach(p=> p.classList.remove('active'));
  document.getElementById('login-page').classList.add('active');

  // wire navbar buttons
  navButtons.forEach(b => b.addEventListener('click', ()=> navigateTo(b.dataset.target)));
  // wire all data-target elements inside pages
  document.querySelectorAll('[data-target]').forEach(el => el.addEventListener('click', ()=> navigateTo(el.dataset.target)));

  // hide navbar until login
  navbar.style.display = 'none';

  // login
  document.getElementById('submit-login').addEventListener('click', ()=>{
    const u = document.getElementById('username').value.trim().toLowerCase();
    const p = document.getElementById('password').value.trim().toLowerCase();
    if(u === 'kitaselamanya' && p === '11september2025'){
      navbar.style.display = 'flex';
      gsap.fromTo('#login-page .login-card', {y:0}, {y:-8, duration:.16, yoyo:true, repeat:1, ease:'power1.out'});
      navigateTo('tentang-page');
    } else {
      gsap.fromTo('#login-page .login-card', {x:-6}, {x:6, duration:.06, repeat:6, yoyo:true, ease:'sine.inOut'});
      showToast('Username / Password salah.');
    }
  });
  document.getElementById('autofill').addEventListener('click', ()=> { document.getElementById('username').value='Kitaselamanya'; document.getElementById('password').value='11september2025'; });

  // music toggle with optional analyser
  let audioCtx, analyser, dataArray;
  async function initAudio(){
    try{
      audioCtx = new (window.AudioContext||window.webkitAudioContext)();
      const src = audioCtx.createMediaElementSource(bgMusic);
      analyser = audioCtx.createAnalyser();
      analyser.fftSize = 256;
      src.connect(analyser);
      analyser.connect(audioCtx.destination);
      dataArray = new Uint8Array(analyser.frequencyBinCount);
    }catch(e){
      analyser = null;
    }
  }
  musicToggle.addEventListener('click', async ()=>{
    if(bgMusic.paused){
      try{
        if(!analyser) await initAudio();
        await bgMusic.play();
        playIcon.style.display='none'; pauseIcon.style.display='inline';
      }catch(e){
        showToast('Autoplay diblokir — klik halaman lalu tekan musik.');
      }
    } else { bgMusic.pause(); playIcon.style.display='inline'; pauseIcon.style.display='none'; }
  });

  // visualize eq if available
  function vizLoop(){
    if(typeof analyser !== 'undefined' && analyser && dataArray){
      analyser.getByteFrequencyData(dataArray);
      for(let i=0;i<eqBars.length;i++){ eqBars[i].style.height = `${Math.max(3, Math.min(28, Math.round((dataArray[i*2]||0)/8)))}px`; }
      let sum = 0; for(let i=0;i<dataArray.length;i++) sum += dataArray[i]; const avg = sum/dataArray.length;
      gsap.to('#blackhole-vortex', {scale: 0.9 + (avg/255)*1.6, duration:0.12, overwrite:true});
    }
    requestAnimationFrame(vizLoop);
  }
  vizLoop();

  // photo click -> I LOVE U + heart stars
  for(let i=1;i<=5;i++){
    const img = document.getElementById('img-'+i);
    const love = document.getElementById('love-'+i);
    if(!img) continue;
    img.addEventListener('click', ()=>{
      if(love.style.opacity === '1') gsap.to(love, {opacity:0, duration:.28}); else gsap.to(love, {opacity:1, duration:.28});
      const r = img.getBoundingClientRect();
      createHeartStars(r.left + r.width/2, r.top + r.height/2, 30);
    });
  }
}

/* ---------------------------
   Navigation + blackhole warp
   --------------------------- */
const blackholeOverlay = document.getElementById('blackhole-overlay');
const blackholeVortex = document.getElementById('blackhole-vortex');

function showPageInstant(id){
  pages.forEach(p => p.id === id ? p.classList.add('active') : p.classList.remove('active'));
  const el = document.getElementById(id); if(el) el.scrollTop = 0;
}

function navigateTo(id){
  blackholeOverlay.style.pointerEvents = 'auto';
  gsap.set(blackholeVortex, {scale:0.6, rotation:0, opacity:1});
  gsap.to(blackholeOverlay, {opacity:1, duration:0.28, ease:'power2.inOut'});
  const tl = gsap.timeline({onComplete: ()=> {
    showPageInstant(id);
    gsap.to(blackholeOverlay, {opacity:0, duration:0.6, delay:0.06, ease:'power2.out', onComplete: ()=> {
      blackholeOverlay.style.pointerEvents = 'none';
      gsap.set(blackholeVortex, {scale:0.6, rotation:0, opacity:1});
    }});
  }});
  tl.to(blackholeVortex, {scale:1.05, rotation:90, duration:0.35}, 0)
    .to(blackholeVortex, {scale:4.2, rotation:720, duration:0.9, ease:'expo.in'}, 0.25);
}
window.navigateTo = navigateTo;

/* ---------------------------
   Heart star animation
   --------------------------- */
function createHeartStars(cx, cy, count=28){
  for(let i=0;i<count;i++){
    const s = document.createElement('div'); s.style.position='fixed';
    s.style.left = `${cx + (Math.random()*180-90)}px`;
    s.style.top = `${cy + (Math.random()*120-60)}px`;
    s.style.width = '10px'; s.style.height = '10px'; s.style.borderRadius = '999px'; s.style.background = 'rgba(236,72,153,0.95)';
    s.style.zIndex = 9999; s.style.pointerEvents = 'none'; s.style.mixBlendMode = 'screen';
    document.body.appendChild(s);
    const t = (i / count) * Math.PI * 2;
    const hx = cx + 34 * Math.pow(Math.sin(t),3);
    const hy = cy - (26 * Math.cos(t) - 9 * Math.cos(2*t) - 2.5 * Math.cos(3*t) - Math.cos(4*t));
    gsap.to(s, { x: hx - parseFloat(s.style.left), y: hy - parseFloat(s.style.top), opacity:0, scale:0.6, duration:1.2, ease:'power2.out', onComplete: ()=> s.remove() });
  }
}

/* ---------------------------
   Starfield canvas (simple & responsive)
   --------------------------- */
const canvas = document.getElementById('starfield');
const ctx = canvas.getContext('2d');
let W = innerWidth, H = innerHeight;
function resizeCanvas(){ W = canvas.width = innerWidth; H = canvas.height = innerHeight; initStars(); }
window.addEventListener('resize', resizeCanvas);
let stars = [];
function initStars(){
  stars = []; const count = Math.max(140, Math.floor((W*H)/9000));
  for(let i=0;i<count;i++) stars.push({x:Math.random()*W,y:Math.random()*H,r:Math.random()*1.6+0.2,hue:200+Math.random()*70,vel:(0.05+Math.random()*0.4)});
}
resizeCanvas();
let parx=0,pary=0,tparx=0,tpary=0;
function render(){
  const g = ctx.createLinearGradient(0,0,0,H); g.addColorStop(0,'#050614'); g.addColorStop(.6,'#0f0522'); g.addColorStop(1,'#03010b');
  ctx.fillStyle = g; ctx.fillRect(0,0,W,H);
  for(const s of stars){
    s.x += (s.vel + (tparx*0.5))*0.3; s.y += (s.vel*0.05 + (tpary*0.2));
    if(s.x > W) s.x = 0; if(s.x < 0) s.x = W; if(s.y > H) s.y = 0;
    ctx.beginPath(); ctx.fillStyle = `hsl(${s.hue} 80% ${75 - s.r*30}%)`; ctx.arc(s.x + tparx*20, s.y + tpary*20, s.r, 0, Math.PI*2); ctx.fill();
  }
  tparx += (parx - tparx) * 0.08; tpary += (pary - tpary) * 0.08;
  requestAnimationFrame(render);
}
render();

/* ---------------------------
   Strawberries DOM drift
   --------------------------- */
const strawLayer = document.getElementById('strawberries');
function makeStrawberries(){
  strawLayer.innerHTML = '';
  const count = Math.max(6, Math.floor(innerWidth/220));
  for(let i=0;i<count;i++){
    const el = document.createElement('img');
    el.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><path fill='%23ec4899' d='M32 4c8 0 16 6 20 12 3 5-1 18-7 27-6 9-13 11-13 11s-7-2-13-11C13 38 9 25 12 20 16 10 24 4 32 4z'/><path fill='%23fff' d='M24 28c1 1 2 1 3 0 1-1 2-2 3-1 1 .7 1 2 2 3 .5 1 1.5 1 2 0'/></svg>`);
    el.style.position='fixed'; el.style.width = `${12 + Math.random()*18}px`;
    el.style.left = Math.random()*innerWidth + 'px'; el.style.top = Math.random()*innerHeight + 'px';
    el.style.opacity = 0.6 + Math.random()*0.35; el.style.transformOrigin='center'; el.style.pointerEvents='none';
    strawLayer.appendChild(el);
    gsap.to(el, {y: `+=${40+Math.random()*80}`, x:`+=${Math.random()*80-40}`, duration:6+Math.random()*6, ease:'sine.inOut', repeat:-1, yoyo:true, delay:Math.random()*3});
    gsap.to(el, {rotation: Math.random()*20-10, duration:6+Math.random()*6, ease:'sine.inOut', repeat:-1, yoyo:true});
  }
}
makeStrawberries();
window.addEventListener('resize', ()=> { gsap.killTweensOf('#strawberries img'); makeStrawberries(); });

/* ---------------------------
   Cursor & trail
   --------------------------- */
const cursorDot = document.getElementById('cursor-dot');
const cursorRing = document.getElementById('cursor-ring');
let mouse = {x: innerWidth/2, y: innerHeight/2};
window.addEventListener('mousemove', e=>{
  mouse.x = e.clientX; mouse.y = e.clientY;
  cursorDot.style.transform = `translate(${mouse.x}px, ${mouse.y}px)`;
  gsap.to(cursorRing, {x:mouse.x, y:mouse.y, duration:0.08, ease:'power2.out', onUpdate:function(){ cursorRing.style.transform = `translate(${this.targets()[0].x}px, ${this.targets()[0].y}px)` }});
  parx = (mouse.x - innerWidth/2)/(innerWidth/2);
  pary = (mouse.y - innerHeight/2)/(innerHeight/2);
  spawnTrail(mouse.x, mouse.y);
});
if(('ontouchstart' in window) || navigator.maxTouchPoints>0){ cursorDot.style.display='none'; cursorRing.style.display='none'; }
function spawnTrail(x,y){
  const el = document.createElement('div'); el.className='trail';
  Object.assign(el.style,{left:`${x}px`,top:`${y}px`,transform:'translate(-50%,-50%)',opacity:'0.95'});
  document.body.appendChild(el);
  gsap.to(el, {x: x + (Math.random()*80-40), y: y + (Math.random()*80-40), opacity:0, scale:0.3, duration:0.9, ease:'power2.out', onComplete: ()=> el.remove()});
}

/* ---------------------------
   keyboard nav
   --------------------------- */
window.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape') navigateTo('login-page');
  if(e.key === 'ArrowLeft' || e.key === 'ArrowRight'){
    const ids = ['foto-page-1','foto-page-2','foto-page-3','foto-page-4','foto-page-5'];
    const activeIndex = pages.findIndex(p=>p.classList.contains('active'));
    if(e.key === 'ArrowLeft' && activeIndex>0) navigateTo(pages[activeIndex-1].id);
    if(e.key === 'ArrowRight' && activeIndex < pages.length-1) navigateTo(pages[activeIndex+1].id);
  }
});

/* ---------------------------
   helper toast
   --------------------------- */
function showToast(msg){
  const el = document.createElement('div'); el.textContent = msg;
  Object.assign(el.style,{position:'fixed',right:'18px',bottom:'90px',background:'rgba(0,0,0,0.6)',color:'#ffd6ea',padding:'8px 12px',borderRadius:'8px',zIndex:9999});
  document.body.appendChild(el); setTimeout(()=> el.remove(), 2200);
}

/* ---------------------------
   final init (safety)
   --------------------------- */
setTimeout(()=> { if(!window.__uiDone) initUI(); }, 1500);
console.log('Single-file gallery ready. Place images in images/, music in music/, video in vidio/ if using local assets.');
</script>
</body>
</html>
